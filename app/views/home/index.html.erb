<div class="row">
  <div class="col-lg-8">
    <!-- Hero Section -->
    <div class="hero-section bg-primary text-white rounded-3 p-5 mb-4 position-relative overflow-hidden">
      <div class="hero-content position-relative z-index-1">
        <h1 class="display-4 fw-bold mb-3">お祭り企画支援プラットフォーム</h1>
        <p class="lead mb-4">地域のお祭り企画・準備・運営を統合的に支援するプラットフォーム</p>
        <% unless user_signed_in? %>
          <%= render 'shared/components/button', 
                label: "今すぐ始める", 
                variant: "light", 
                size: "lg", 
                path: new_user_registration_path,
                icon: "bi-rocket",
                class: "shadow-lg" %>
        <% end %>
      </div>
      <div class="hero-decoration position-absolute top-0 end-0 opacity-25">
        <i class="bi bi-stars display-1"></i>
      </div>
    </div>

    <% if user_signed_in? %>
      <!-- Quick Actions Section -->
      <div class="row g-4">
        <% unless current_user.platform_visitor? %>
          <div class="col-md-6">
            <%= render 'shared/components/card',
                  title: "私のお祭り",
                  icon: "bi-calendar-event",
                  variant: "primary",
                  subtitle: "企画・運営中のお祭り",
                  hover_effect: true,
                  actions: [
                    { label: "すべて表示", path: festivals_path, class: "btn-primary" },
                    { label: "新規作成", path: new_festival_path, class: "btn-outline-primary" }
                  ] %>
          </div>
          <div class="col-md-6">
            <%= render 'shared/components/card',
                  title: "私のタスク",
                  icon: "bi-check-square",
                  variant: "success",
                  subtitle: "担当タスクと進捗状況",
                  hover_effect: true,
                  actions: [
                    { label: "すべて表示", path: tasks_path, class: "btn-success" },
                    { label: "新規タスク", path: new_task_path, class: "btn-outline-success" }
                  ] %>
          </div>
        <% else %>
          <div class="col-md-12">
            <%= render 'shared/components/card',
                  title: "お祭りを探す",
                  icon: "bi-search",
                  variant: "info",
                  subtitle: "地域のお祭り情報を検索・閲覧できます",
                  hover_effect: true,
                  full_height: true,
                  class: "text-center",
                  actions: [
                    { label: "お祭りを探す", path: public_festivals_path, class: "btn-info btn-lg" }
                  ] %>
          </div>
        <% end %>
      </div>

      <!-- Dashboard Stats (if applicable) -->
      <% unless current_user.platform_visitor? %>
        <div class="row g-4 mt-2">
          <div class="col-md-3">
            <%= render 'shared/components/stats_card',
                  title: "アクティブな祭り",
                  value: current_user.festivals.active.count,
                  icon: "bi-calendar-event",
                  variant: "primary",
                  trend: { value: 5, direction: "up" } %>
          </div>
          <div class="col-md-3">
            <%= render 'shared/components/stats_card',
                  title: "進行中タスク",
                  value: current_user.tasks.in_progress.count,
                  icon: "bi-clock",
                  variant: "warning",
                  trend: { value: 2, direction: "down" } %>
          </div>
          <div class="col-md-3">
            <%= render 'shared/components/stats_card',
                  title: "完了タスク",
                  value: current_user.tasks.completed.count,
                  icon: "bi-check-circle",
                  variant: "success",
                  trend: { value: 15, direction: "up" } %>
          </div>
          <div class="col-md-3">
            <%= render 'shared/components/stats_card',
                  title: "チームメンバー",
                  value: current_user.festivals.joins(:users).distinct.count('users.id'),
                  icon: "bi-people",
                  variant: "info" %>
          </div>
        </div>
      <% end %>
    <% end %>
  </div>

  <div class="col-lg-4">
    <%= render 'shared/components/card',
          title: "プラットフォーム機能",
          icon: "bi-star",
          variant: "info",
          full_height: true do %>
      <div class="feature-list">
        <div class="feature-item d-flex align-items-start mb-4">
          <div class="feature-icon bg-primary bg-opacity-10 rounded-circle p-3 me-3 flex-shrink-0">
            <i class="bi bi-calendar-event text-primary fs-5"></i>
          </div>
          <div>
            <h6 class="fw-bold mb-1">イベント管理</h6>
            <p class="text-muted mb-0 small">お祭りの企画から当日運営まで</p>
          </div>
        </div>
        
        <div class="feature-item d-flex align-items-start mb-4">
          <div class="feature-icon bg-success bg-opacity-10 rounded-circle p-3 me-3 flex-shrink-0">
            <i class="bi bi-people text-success fs-5"></i>
          </div>
          <div>
            <h6 class="fw-bold mb-1">関係者連携</h6>
            <p class="text-muted mb-0 small">実行委員・ボランティア・出店者の協力体制</p>
          </div>
        </div>
        
        <div class="feature-item d-flex align-items-start mb-4">
          <div class="feature-icon bg-warning bg-opacity-10 rounded-circle p-3 me-3 flex-shrink-0">
            <i class="bi bi-check-square text-warning fs-5"></i>
          </div>
          <div>
            <h6 class="fw-bold mb-1">タスク管理</h6>
            <p class="text-muted mb-0 small">進捗可視化と効率的な準備</p>
          </div>
        </div>
        
        <div class="feature-item d-flex align-items-start">
          <div class="feature-icon bg-danger bg-opacity-10 rounded-circle p-3 me-3 flex-shrink-0">
            <i class="bi bi-shop text-danger fs-5"></i>
          </div>
          <div>
            <h6 class="fw-bold mb-1">出店管理</h6>
            <p class="text-muted mb-0 small">出店申請から配置管理まで</p>
          </div>
        </div>
      </div>
    <% end %>

    <!-- Recent Activity Card (if user is signed in) -->
    <% if user_signed_in? && !current_user.platform_visitor? %>
      <div class="mt-4">
        <%= render 'shared/components/card',
              title: "最近の活動",
              icon: "bi-clock-history",
              variant: "default",
              class: "mt-4" do %>
          <div class="activity-feed">
            <div class="activity-item d-flex align-items-center py-2">
              <div class="activity-icon bg-success bg-opacity-10 rounded-circle p-2 me-3">
                <i class="bi bi-check-circle text-success"></i>
              </div>
              <div class="flex-grow-1">
                <p class="mb-0 small">タスクが完了しました</p>
                <small class="text-muted">2時間前</small>
              </div>
            </div>
            
            <div class="activity-item d-flex align-items-center py-2">
              <div class="activity-icon bg-primary bg-opacity-10 rounded-circle p-2 me-3">
                <i class="bi bi-calendar-plus text-primary"></i>
              </div>
              <div class="flex-grow-1">
                <p class="mb-0 small">新しいお祭りが作成されました</p>
                <small class="text-muted">1日前</small>
              </div>
            </div>
            
            <div class="activity-item d-flex align-items-center py-2">
              <div class="activity-icon bg-warning bg-opacity-10 rounded-circle p-2 me-3">
                <i class="bi bi-person-plus text-warning"></i>
              </div>
              <div class="flex-grow-1">
                <p class="mb-0 small">チームメンバーが追加されました</p>
                <small class="text-muted">3日前</small>
              </div>
            </div>
          </div>
          
          <div class="text-center mt-3">
            <%= render 'shared/components/button',
                  label: "すべて表示",
                  variant: "outline-primary",
                  size: "sm",
                  path: "#" %>
          </div>
        <% end %>
      </div>
    <% end %>
  </div>
</div>
