<div class="row justify-content-center">
  <div class="col-lg-8">
    <div class="card">
      <div class="card-header">
        <h3 class="mb-0">出店申請</h3>
        <small class="text-muted">お祭り: <%= @festival.name %></small>
      </div>
      <div class="card-body">
        <%= form_with model: [@festival, @vendor_application], local: true, class: "needs-validation", novalidate: true do |f| %>
          <% if @vendor_application.errors.any? %>
            <div class="alert alert-danger">
              <h5><%= @vendor_application.errors.count %>件のエラーがあります:</h5>
              <ul class="mb-0">
                <% @vendor_application.errors.full_messages.each do |message| %>
                  <li><%= message %></li>
                <% end %>
              </ul>
            </div>
          <% end %>

          <div class="mb-3">
            <%= f.label :business_name, "事業者名/店舗名", class: "form-label" %>
            <%= f.text_field :business_name, class: "form-control", required: true %>
            <div class="invalid-feedback">
              事業者名/店舗名を入力してください。
            </div>
          </div>

          <div class="mb-3">
            <%= f.label :business_type, "事業種別", class: "form-label" %>
            <%= f.select :business_type, 
                options_for_select([
                  ['飲食店', '飲食店'],
                  ['物販', '物販'],
                  ['ゲーム・アトラクション', 'ゲーム・アトラクション'],
                  ['工芸品・手作り品', '工芸品・手作り品'],
                  ['サービス業', 'サービス業'],
                  ['その他', 'その他']
                ], @vendor_application.business_type), 
                { prompt: '選択してください' }, 
                { class: "form-select", required: true } %>
            <div class="invalid-feedback">
              事業種別を選択してください。
            </div>
          </div>

          <div class="mb-3">
            <%= f.label :description, "事業内容の説明", class: "form-label" %>
            <%= f.text_area :description, rows: 4, class: "form-control", required: true %>
            <div class="form-text">提供する商品・サービスについて詳しく説明してください。</div>
            <div class="invalid-feedback">
              事業内容の説明を入力してください。
            </div>
          </div>

          <div class="mb-3">
            <%= f.label :requirements, "必要な設備・要望", class: "form-label" %>
            <%= f.text_area :requirements, rows: 3, class: "form-control" %>
            <div class="form-text">電源、水道、テント設営場所、その他の要望があれば記載してください。</div>
          </div>

          <div class="alert alert-info">
            <h6>注意事項</h6>
            <ul class="mb-0 small">
              <li>申請は審査後、承認・却下が決定されます</li>
              <li>承認後、詳細な出店条件をお知らせします</li>
              <li>出店料金や場所については別途ご連絡いたします</li>
              <li>食品を扱う場合は、必要な許可証の提出が必要です</li>
            </ul>
          </div>

          <div class="d-flex justify-content-between">
            <%= link_to "キャンセル", @festival, class: "btn btn-secondary" %>
            <%= f.submit "申請を送信", class: "btn btn-primary" %>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>
