# 次のステップ実装計画

## 現在の状況まとめ

### ✅ 完了した作業
1. **アプリケーション基盤確認** 
   - Rails 8.0.2サーバー正常起動
   - PostgreSQLデータベース接続確認
   - Deviseログイン画面正常表示
   - シードデータ作成済み（5つの役割のテストユーザー）

2. **テスト環境整備**
   - フィクスチャファイル修正
   - テストデータベース設定完了
   - 基本的なテスト実行可能

3. **基本機能確認**
   - ユーザー認証システム（Devise）動作確認
   - Bootstrap 5.3のSPA風レイアウト適用
   - 7つのユーザー役割定義済み

### 🔧 現在実装済みの機能
- **ユーザー管理**: 認証、権限（7役割）
- **お祭り管理**: CRUD機能、ステータス管理（5段階）
- **タスク管理**: 優先度・ステータス管理、期限チェック
- **出店申請**: 基本申請機能
- **UI/UX**: モダンなSPA風インターフェース

## 次のステップ優先順位

### 🔥 優先度：HIGH（即座に着手）
#### 1. 既存機能の強化と改善
- **タスク一覧画面の改善** - フィルタ・ソート機能
- **お祭りダッシュボード** - 進捗可視化、統計表示
- **出店申請の承認ワークフロー** - ステータス管理UI

#### 2. 重要な未実装機能（MVP拡張）
- **通知システム** - タスク期限、申請承認等
- **ファイル管理** - Active Storage設定、画像アップロード
- **基本的なレポート機能** - 進捗レポート、CSV出力

### 🔶 優先度：MEDIUM（次のフェーズ）
#### 3. 会場・スケジュール管理
- **会場レイアウト管理** - 簡易マップ機能
- **詳細スケジュール管理** - カレンダー表示、タイムライン
- **リソース管理** - 設備、備品の配置管理

#### 4. コミュニケーション機能
- **掲示板・フォーラム** - 関係者間情報共有
- **チャット機能** - リアルタイムコミュニケーション
- **アナウンス機能** - 重要情報の一斉配信

### 🔵 優先度：LOW（将来対応）
#### 5. 高度な機能
- **予算・収支管理** - 詳細な財務管理
- **申請・許可管理** - 行政手続きトラッキング
- **分析・レポート** - 高度なデータ分析、BI機能

## 具体的な実装ロードマップ（今後2週間）

### Week 1: 既存機能強化
**Day 1-2: タスク管理改善**
```
- タスク一覧のフィルタリング（ステータス、優先度、担当者）
- ソート機能（期限、優先度、作成日）
- 期限切れタスクのハイライト表示
```

**Day 3-4: お祭りダッシュボード**
```
- 進捗率の可視化（プログレスバー、チャート）
- タスク統計（完了率、期限切れ数）
- 出店申請状況一覧
```

**Day 5-7: 通知システム基盤**
```
- 通知モデルの設計・実装
- メール通知機能（Mailer設定）
- Web通知（リアルタイム表示）
```

### Week 2: 新機能追加
**Day 8-10: ファイル管理**
```
- Active Storage設定
- 画像アップロード機能（お祭り、タスク）
- ファイル添付機能（申請書類等）
```

**Day 11-12: 出店申請ワークフロー**
```
- 申請承認・却下機能
- ステータス変更履歴
- 申請者・審査者への通知
```

**Day 13-14: 基本レポート**
```
- 進捗レポートPDF出力
- タスク一覧CSV出力
- 参加者リスト管理
```

## 技術的な考慮事項

### 新たに導入予定のGem
```ruby
# ファイル管理
gem 'image_processing' # 既に導入済み

# PDF生成
gem 'prawn'
gem 'prawn-table'

# Excel出力
gem 'axlsx'
gem 'axlsx_rails'

# リアルタイム通信
gem 'turbo-rails' # 既に導入済み
gem 'stimulus-rails' # 既に導入済み

# 通知
gem 'noticed' # 通知管理
```

### データベース拡張
```sql
-- 通知テーブル
notifications (id, user_id, message, read_at, created_at)

-- ファイル添付（Active Storage使用）
active_storage_blobs, active_storage_attachments

-- 会場管理（将来）
venues (id, name, description, layout_data)
venue_areas (id, venue_id, name, coordinates)
```

## 成果目標（2週間後）

### 定量的目標
- **機能完成度**: 40% → 65%
- **テストカバレッジ**: 基本機能80%以上
- **ページ応答速度**: 3秒以内維持

### 定性的目標
- **ユーザビリティ**: 直感的な操作性
- **実用性**: 実際のお祭り企画で使用可能なレベル
- **拡張性**: 将来機能追加時の基盤整備

## リスク管理

### 主要リスク
1. **スコープクリープ** - 機能追加の際の要件膨張
2. **パフォーマンス** - データ量増加時の応答速度
3. **セキュリティ** - ファイルアップロード、権限管理

### 対策
- 機能ごとの明確な完了基準設定
- 段階的な負荷テスト実施
- セキュリティチェックリストの作成と適用

---

**次の作業開始**: タスク管理機能の改善から着手し、ユーザーエクスペリエンスの向上を図る。