# Festival Planner Platform - 管理者マニュアル

[![Admin Manual](https://img.shields.io/badge/manual-administrator-red.svg)](https://github.com/YukiKudo03/festival-planner-platform)
[![Access Level](https://img.shields.io/badge/access-full%20system-brightred.svg)](https://github.com/YukiKudo03/festival-planner-platform)
[![Security](https://img.shields.io/badge/security-critical-red.svg)](https://github.com/YukiKudo03/festival-planner-platform)

## 🔐 管理者概要

システム管理者は、Festival Planner Platformの最高権限を持つユーザーです。システム全体の設定、ユーザー管理、セキュリティ監視、パフォーマンス最適化を担当します。

### 管理者の責任範囲
- **システム全体の管理**: 設定、監視、保守
- **ユーザー管理**: アカウント管理、権限設定
- **セキュリティ管理**: 監査、アクセス制御
- **データ管理**: バックアップ、復旧、最適化
- **運用監視**: パフォーマンス、エラー監視

## 🚀 管理者ダッシュボード

### アクセス方法
1. 管理者アカウントでログイン
2. 右上のユーザーメニューから「管理者ダッシュボード」を選択
3. または直接URL: `https://your-domain.com/admin`

### ダッシュボード構成

#### 1. システムステータス概要
```
┌─────────────────────┬─────────────────────┬─────────────────────┐
│ システム稼働率      │ アクティブユーザー   │ 今日の処理数         │
│ 99.9%              │ 1,247               │ 15,632              │
└─────────────────────┴─────────────────────┴─────────────────────┘
```

#### 2. クイックアクション
- **緊急メンテナンス**: システム緊急停止
- **セキュリティ監査**: 即座のセキュリティチェック
- **バックアップ実行**: 手動バックアップ作成
- **システムクリーンアップ**: キャッシュ・ログクリア

#### 3. 最近のアクティビティ
- ユーザー登録・ログイン状況
- システムエラー・警告
- セキュリティイベント
- パフォーマンス異常

## 👥 ユーザー管理

### ユーザー一覧画面
**アクセス**: 管理者ダッシュボード → ユーザー管理

#### 検索・フィルタ機能
```
フィルタ条件:
- 役割: 管理者 / 主催者 / ベンダー / 一般
- ステータス: アクティブ / 非アクティブ / 一時停止
- 登録日: 日付範囲指定
- 最終ログイン: 日付範囲指定
```

#### ユーザー操作
1. **ユーザー詳細**: 基本情報、権限、アクティビティ履歴
2. **権限変更**: 役割の変更、特別権限の付与
3. **アカウント制御**: 一時停止、再有効化、削除
4. **パスワードリセット**: 強制パスワード変更要求

### 新規ユーザー作成
```
必須項目:
- 名前（姓・名）
- メールアドレス
- 初期パスワード
- 役割設定
- 権限レベル

オプション項目:
- 電話番号
- 所属組織
- 備考
- 有効期限
```

### 一括ユーザー操作
- **CSVインポート**: 複数ユーザーの一括登録
- **一括権限変更**: 選択したユーザーの権限一括変更
- **一括通知**: 特定グループへの通知送信
- **一括エクスポート**: ユーザー情報のCSV出力

## 🏛️ システム設定

### 基本設定
**アクセス**: 管理者ダッシュボード → システム設定

#### 1. サイト基本情報
```yaml
サイト名: Festival Planner Platform
管理者メール: admin@your-domain.com
システムタイムゾーン: Asia/Tokyo
デフォルト言語: ja
メンテナンスモード: OFF
```

#### 2. セキュリティ設定
```yaml
パスワード最小長: 8文字
パスワード複雑度: 必須
セッションタイムアウト: 60分
ログイン試行回数制限: 5回
2要素認証: 推奨
API レート制限: 100リクエスト/分
```

#### 3. メール設定
```yaml
SMTP設定:
  サーバー: smtp.gmail.com
  ポート: 587
  認証: STARTTLS
  送信者名: Festival Planner Platform
  返信先: noreply@your-domain.com
```

### 通知設定
#### システム通知
- **重要度設定**: 緊急、高、中、低
- **配信チャネル**: メール、システム内、SMS
- **送信タイミング**: 即座、バッチ、スケジュール
- **テンプレート管理**: 通知テンプレートの作成・編集

#### 自動通知ルール
```
例: ユーザー登録時
- 条件: 新規ユーザー登録
- 対象: 管理者
- 内容: 新規ユーザー登録通知
- 配信: 即座 + メール
```

## 🔒 セキュリティ管理

### セキュリティ監査
**アクセス**: 管理者ダッシュボード → セキュリティ → 監査

#### 1. 自動セキュリティチェック
```bash
# セキュリティ監査の実行
毎日午前2時: 自動実行
手動実行: 「セキュリティ監査実行」ボタン
```

#### 2. 監査レポート項目
- **認証セキュリティ**: パスワード強度、2要素認証状況
- **アクセス制御**: 権限設定、異常アクセス
- **データ保護**: 暗号化状況、データ完整性
- **システム脆弱性**: 既知の脆弱性チェック
- **ログ監査**: 異常なログパターン

#### 3. セキュリティスコア
```
現在のセキュリティスコア: 85/100

改善項目:
- 2要素認証有効化率: 65% → 90%目標
- パスワード更新頻度: 平均120日 → 90日目標
- 未使用アカウント: 15個 → 削除推奨
```

### アクセス制御
#### IP制限設定
```
許可IPアドレス範囲:
- 社内ネットワーク: 192.168.1.0/24
- VPN接続: 10.0.0.0/8
- 管理者自宅: 203.0.113.0/24

ブロック対象:
- 不正アクセス試行IP
- 海外からのアクセス（設定可能）
- 既知の攻撃者IP
```

#### 異常アクセス監視
- **複数ログイン試行**: 短時間での複数失敗
- **異常な時間帯**: 深夜・早朝のアクセス
- **地理的異常**: 通常とは異なる地域からのアクセス
- **API濫用**: 異常に多いAPIコール

## 📊 システム監視

### パフォーマンス監視
**アクセス**: 管理者ダッシュボード → 監視 → パフォーマンス

#### 1. リアルタイム監視
```
CPU使用率: [████████░░] 80%
メモリ使用率: [██████░░░░] 60%
ディスク使用率: [███░░░░░░░] 30%
ネットワーク帯域: 15.2 Mbps
```

#### 2. データベース監視
```
アクティブ接続数: 25/100
クエリ実行時間: 平均 12ms
インデックス効率: 98%
デッドロック発生: 0件/日
```

#### 3. Redis監視
```
メモリ使用量: 512MB/2GB
接続数: 50/10000
キャッシュヒット率: 95%
期限切れキー: 1,234個
```

### エラー監視
#### エラーログ分析
```
今日のエラー統計:
- 500エラー: 3件（調査中）
- 404エラー: 127件（通常範囲）
- 認証エラー: 45件（不正アクセス疑い）
- タイムアウト: 2件
```

#### 異常検知アラート
- **CPU/メモリ使用率**: 80%超過時
- **レスポンス時間**: 5秒超過時
- **エラー率**: 5%超過時
- **ディスク容量**: 90%超過時

## 💾 データ管理

### バックアップ管理
**アクセス**: 管理者ダッシュボード → データ管理 → バックアップ

#### 1. バックアップ設定
```yaml
自動バックアップ:
  データベース: 毎日午前1時
  ファイル: 毎日午前2時
  設定: 毎週日曜日午前3時
  保存期間: 30日間
  保存場所: AWS S3 + ローカル
```

#### 2. バックアップ履歴
```
最新バックアップ:
- 2025-07-06 01:00: DB完了（125MB）
- 2025-07-06 02:00: ファイル完了（2.1GB）
- 2025-07-06 03:00: 設定完了（512KB）

復旧テスト: 2025-07-01 正常完了
```

#### 3. 手動バックアップ
- **即座実行**: 「今すぐバックアップ」ボタン
- **選択実行**: データベース、ファイル、設定を個別選択
- **復旧実行**: 指定日時からの復旧操作

### データ最適化
#### データベース最適化
```sql
-- 定期実行される最適化処理
VACUUM ANALYZE;  -- 毎週日曜日
REINDEX;         -- 毎月第1日曜日
統計情報更新;     -- 毎日午前3時
```

#### ストレージ最適化
- **古いログファイル削除**: 30日以上経過
- **一時ファイル削除**: 24時間以上経過
- **キャッシュクリア**: 週次
- **未使用画像削除**: 90日以上未参照

## 🔧 システム保守

### 定期メンテナンス
**アクセス**: 管理者ダッシュボード → メンテナンス

#### 1. メンテナンス計画
```
毎日:
- ログローテーション
- 一時ファイル削除
- システムヘルスチェック

毎週:
- データベース最適化
- セキュリティパッチ確認
- パフォーマンスレポート

毎月:
- 全体バックアップ
- セキュリティ監査
- 容量計画見直し
```

#### 2. メンテナンスモード
```
メンテナンスモード設定:
- 開始時刻: 手動 or スケジュール
- 継続時間: 30分-6時間
- 表示メッセージ: カスタマイズ可能
- 除外IP: 管理者IP除外可能
```

### システムアップデート
#### 1. アップデート管理
```
現在のバージョン: v2.0.0
利用可能アップデート:
- セキュリティパッチ: v2.0.1（推奨）
- 機能追加: v2.1.0（計画中）
- メジャーアップデート: v3.0.0（開発中）
```

#### 2. アップデート手順
1. **事前準備**: バックアップ作成
2. **テスト環境**: 動作確認
3. **メンテナンス**: 本番環境更新
4. **動作確認**: 機能テスト
5. **監視強化**: アップデート後24時間

## 📈 レポート・分析

### 管理者向けレポート
**アクセス**: 管理者ダッシュボード → レポート

#### 1. システム利用状況
```
月次レポート:
- 総ユーザー数: 5,247人（前月比+12%）
- アクティブユーザー: 3,891人（前月比+8%）
- 作成されたイベント: 89件（前月比+15%）
- 総売上: ¥12,450,000（前月比+22%）
```

#### 2. パフォーマンス分析
```
システムパフォーマンス:
- 平均レスポンス時間: 180ms
- 稼働率: 99.97%
- ピーク時間帯: 10:00-11:00, 14:00-15:00
- 最高負荷: 500同時接続
```

#### 3. セキュリティレポート
```
セキュリティ状況:
- 検出された脅威: 23件（すべて無害化）
- ブロックされたIP: 156個
- 不正ログイン試行: 234件
- セキュリティスコア: 85/100
```

### カスタムレポート
#### レポート作成機能
1. **データソース選択**: ユーザー、イベント、決済等
2. **期間指定**: 日、週、月、年、カスタム
3. **フィルタ条件**: 複数条件の組み合わせ
4. **出力形式**: PDF、CSV、Excel
5. **配信設定**: メール自動送信

## 🚨 緊急時対応

### 緊急事態の種類
1. **システム障害**: サーバーダウン、データベース異常
2. **セキュリティ事故**: 不正アクセス、データ漏洩
3. **サービス過負荷**: 急激なアクセス増加
4. **データ破損**: 重要データの消失・破損

### 緊急対応手順
#### 1. 即座対応（5分以内）
```
1. 状況確認
   - エラーログチェック
   - 監視画面確認
   - ユーザー影響範囲特定

2. 初期対応
   - 緊急メンテナンス実行（必要に応じて）
   - 関係者への通知
   - バックアップ確認
```

#### 2. 詳細対応（30分以内）
```
1. 原因調査
   - ログ詳細分析
   - システム状態確認
   - 外部要因調査

2. 復旧作業
   - バックアップからの復旧
   - 設定修正
   - 動作確認
```

#### 3. 事後対応（24時間以内）
```
1. 報告書作成
   - 事故原因分析
   - 対応経過記録
   - 改善提案

2. 再発防止
   - システム改善
   - 監視強化
   - 手順見直し
```

### 緊急連絡先
```
システム管理者: admin@your-domain.com
開発チーム: dev-team@your-domain.com
インフラ担当: infra@your-domain.com
セキュリティ担当: security@your-domain.com

緊急時24時間対応:
- 電話: +81-3-XXXX-XXXX
- SMS: +81-90-XXXX-XXXX
```

## 🔍 高度な管理機能

### API管理
**アクセス**: 管理者ダッシュボード → API管理

#### 1. API使用状況
```
API統計:
- 総リクエスト数: 125,847件/日
- 平均レスポンス時間: 95ms
- エラー率: 0.8%
- 最も使用されるエンドポイント: /api/v1/festivals
```

#### 2. レート制限設定
```yaml
デフォルト制限:
  - 認証済みユーザー: 1000リクエスト/時間
  - 未認証: 100リクエスト/時間
  - 管理者: 無制限

特別制限:
  - 決済API: 100リクエスト/時間
  - 一括操作: 50リクエスト/時間
```

### システム統合
#### 外部システム連携
1. **決済システム**: Stripe、PayPal設定
2. **メール配信**: SendGrid、AWS SES設定
3. **ファイルストレージ**: AWS S3、Google Cloud設定
4. **監視システム**: New Relic、Datadog設定

## 📚 管理者向け資料

### 操作マニュアル
- [システム設定詳細ガイド](ADMIN_SYSTEM_CONFIG.md)
- [セキュリティ管理ガイド](ADMIN_SECURITY_GUIDE.md)
- [トラブルシューティング](ADMIN_TROUBLESHOOTING.md)
- [API管理ガイド](ADMIN_API_GUIDE.md)

### 技術資料
- [システムアーキテクチャ](SYSTEM_ARCHITECTURE.md)
- [データベース設計](DATABASE_DESIGN.md)
- [セキュリティ仕様](SECURITY_SPECIFICATIONS.md)
- [パフォーマンス最適化](PERFORMANCE_OPTIMIZATION.md)

## ⚠️ 注意事項

### 管理者権限の責任
- **慎重な操作**: すべての操作がシステム全体に影響
- **セキュリティ意識**: 管理者アカウントは最高の標的
- **定期的な監視**: システム状態の継続的な確認
- **バックアップ確認**: 定期的なバックアップの動作確認

### 禁止事項
- **管理者権限の共有**: アカウントの共有は厳禁
- **未承認の変更**: 手順を経ない設定変更
- **セキュリティ設定の緩和**: 安易なセキュリティ設定変更
- **バックアップなしの作業**: 重要作業前のバックアップ必須

---

**最終更新**: 2025年7月6日  
**対象バージョン**: v2.0.0  
**マニュアルバージョン**: 1.0  
**対象者**: システム管理者

**緊急時連絡先**: admin@your-domain.com  
**サポート**: 24時間365日対応